((t,l)=>{t.dataLayer=t.dataLayer||[],t.fxp=t.fxp||[];const h={webc_fxp_1732:()=>location.pathname==="/booking/success"&&t.formbricks,webc_fxp_1771:()=>location.pathname==="/booking/success"&&t.formbricks,webc_fxp_1835:()=>t.formbricks!=null,webc_fxp_1838:()=>location.pathname==="/",webc_fxp_1869:()=>location.pathname==="/checkout"&&l.querySelector('[data-test="list-info"] img')!==null},f={webc_fxp_1732:{0:[],1:[()=>{t.fxp1732||(t.fxp1732=!0,formbricks.track("fxp1732_DE_V4"))},()=>{(()=>{const c=l.querySelector('label[for="aw2637eohg2jpmlcqc2flsa3"]');if(!c)return;const s=c.parentElement.parentElement.parentElement.parentElement.querySelector('button[tabindex="1"]');!s||t.fxp1732Listener||(t.fxp1732Listener=!0,s.addEventListener("click",function(){t.open(e(),"_blank").focus()}))})();function e(){const c=r(),s=a(),o=n();if(!c||!s||!o)return console.log(c,s,o),"https://de.trustpilot.com/evaluate/flixbus.de";let i="https://geo.cro.flixbus.com/trustpilot/invitation-link";const b=new URLSearchParams({domain:"flixbus_de",token:"clv3r6ha8ld5Sq208la3rg21x91",name:s,email:c,network_userid:o});return i+="?"+b.toString(),console.log(i),i}function r(){const c=localStorage.getItem("persist:contact");if(c)try{const s=JSON.parse(c).email.replace(/"/g,"");return/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(s)?s:null}catch(s){return null}else return null}function a(){try{const c=localStorage.getItem("persist:passenger"),s=JSON.parse(c),o=JSON.parse(s.passengers);return o&&o.length>0?o[0].firstName:null}catch(c){return null}}function n(){const c=l.cookie.split(";").map(o=>o.trim());let s="";return c.reduce((o,i)=>{const[b,S]=i.split("=");b.startsWith("_sp_id.")&&(s=S)},{}),s.substr(0,s.indexOf("."))}}]},webc_fxp_1771:{0:[],1:[()=>{(()=>{if(t.fxp1618)return;let e;switch(t.location.hostname){case"shop.flixbus.com":case"shop.global.flixbus.com":e="fxp1618_us";break;case"shop.greyhound.com":e="fxp1618_gh";break;case"shop.flixbus.co.uk":e="fxp1618_uk";break;case"shop.flixbus.fr":e="fxp1618_fr";break;case"shop.flixbus.it":e="fxp1618_it";break;case"shop.flixbus.dk":e="fxp1618_dk";break;default:return!1}t.fxp1618=!0,formbricks.track(e)})()}]},webc_fxp_1835:{0:[],1:[()=>{(()=>{if(l.location.pathname!=="/search")return;var e=[...t.globalEventsCache].reverse().find(c=>c.name==="search.results.results_visible");if(!e)return;var r=e.payload[0].results;if(!r||itemArray.length<1)return;let a=!1,n=!1;r.some(c=>c.status==="full")?(n=!1,a=!1):r.forEach(c=>{c.uid.match(/^direct:/)&&(n=!0),c.uid.match(/^ic:/)&&(a=!0)}),a&&n?sessionStorage.setItem("fxp_1835_IC&Direct",!0):sessionStorage.setItem("fxp_1835_IC&Direct",!1)})()},()=>{(()=>{if(l.location.pathname!=="/booking/success")return;var e=[...t.globalEventsCache].reverse().find(n=>n.name==="booking.success");if(!e)return;var r=e.payload[0].items;const a=sessionStorage.getItem("fxp_1835_IC&Direct");!a||Object.keys(r).forEach(n=>{var c=r[n];if(c.transfers&&Array.isArray(c.transfers)&&c.transfers.length>1&&a==="true")switch(l.location.hostname){case"shop.flixbus.com":case"shop.global.flixbus.com":case"shop.flixbus.co.uk":if(l.documentElement.lang.substring(0,2)==="en")formbricks.track("fxp1835_en");else return;break;case"shop.flixbus.de":case"shop.flixbus.at":formbricks.track("fxp1835_de");break;case"shop.flixbus.fr":formbricks.track("fxp1835_fr");break;case"shop.flixbus.it":formbricks.track("fxp1835_it");break;default:return}})})()}]},webc_fxp_1838:{0:[],1:[]},webc_fxp_1839:{0:[],1:[()=>{(e=>{if(!e.getElementById("fxp-cf6b6629-121b-442c-bce6-18992f69e6ec")){var r=e.createElement("style");r.id="fxp-cf6b6629-121b-442c-bce6-18992f69e6ec",e.head.appendChild(r).innerText=".flix-radio__label,[class*=hcr-radio__label],.hcr-switch__label,[class*=hcr-switch__label],.hcr-checkbox__label,[class*=hcr-checkbox__label],.hcr-range__field,[class*=hcr-range__field]{--hcr-ui-primary-color: #353535 !important;--flix-ui-primary-color: #353535 !important}"}})(l)}],2:[()=>{(e=>{if(!e.getElementById("fxp-86294f84-6013-4f5f-b8b9-39e71f4b1bb5")){var r=e.createElement("style");r.id="fxp-86294f84-6013-4f5f-b8b9-39e71f4b1bb5",e.head.appendChild(r).innerText="[class*=hcr-radio__label],[class*=hcr-checkbox__label],[class*=hcr-range__field]{--hcr-ui-primary-color: #353535 !important;--flix-ui-primary-color: #353535 !important}[class*=hcr-switch__label]{--hcr-ui-primary-color: #97D700 !important;--flix-ui-primary-color: #97D700 !important}[class*=hcr-checkbox__input]:checked+[class*=hcr-checkbox__label]:before,[class*=hcr-radio__input]:checked+[class*=hcr-radio__label]:before{background-color:#97d700;border-color:#97d700}#router .hcr-switch__input:checked+.hcr-switch__label:after,.flix-main-wrapper .hcr-switch__input:checked+.hcr-switch__label:after{background-color:#353535}#router [class*=hcr-range__track-range]{background:#97D700}"}})(l)}]},webc_fxp_1869:{0:[],1:[()=>{(()=>{const e=r=>{const a=l.querySelector(`img[src="/img/gate/${r}.svg"], img[src="/img/gate/${r}.png"]`);a&&(a.src=`https://pulse.cro.flixbus.com/abtests/1869/${r}.svg`)};["credit_card_jcb","online-banking-in","wallet_in","upi","cash-logo","satispay","klarna","free","paypal","mbway","online_banking_pl","ideal"].forEach(r=>{e(r)})})()}]}};let p={};const u={attributes:!0,childList:!0,subtree:!0},x=(e,r)=>{r.disconnect(),g(),r.observe(l.body,u)};new MutationObserver(x).observe(l.body,u);const _=e=>{Object.keys(e).forEach(r=>{const a=String(r),n=String(e[r]);p[a]=n}),g()},g=()=>{Object.keys(p).forEach(e=>{let r=e,a=p[e];m(r,a)})},m=(e,r)=>{if(!!p[e]){if(!f[e]){t.fxp[e]===void 0&&(t.fxp[e]=null);return}if(!k(e)){t.fxp[e]===void 0&&(t.fxp[e]=!1);return}v(e,r),f[e]&&(!f[e][r]||f[e][r].forEach(a=>{try{a()}catch(n){console.warn(e,n)}}))}},k=e=>{if(!h[e])return!0;try{return h[e]()}catch(r){console.warn(e,r)}},v=(e,r)=>{t.fxp[e]!==r&&(t.dataLayer.push({event:"ab_cc",ab_cc_id:e,ab_cc_v:r,ab_cc_src:"fxp"}),t.fxp[e]=r,typeof t.globalEvents=="object"&&t.globalEvents.emit("flixperiments",{[e]:r}))};if(l.location.host.slice(0,5)==="shop."&&l.location.pathname==="/")return;const y=()=>t.globalEvents.on("*.ab_test_flags",e=>_(e)),E=()=>{if(!t.globalEventsCache||!t.globalEventsCache.length)return!1;t.globalEventsCache.filter(e=>e.name.match(/ab_test_flags$/g)).forEach(e=>_(e.payload[0]))},d=setInterval(()=>{typeof t.globalEvents=="object"&&(clearInterval(d),y(),E())},200)})(window,document);